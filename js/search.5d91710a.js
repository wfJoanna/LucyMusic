(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{"0678":function(t,e,s){"use strict";s("93c4")},"16f2":function(t,e,s){},"1ef7":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("div",{staticClass:"search-title"},[t._v("搜索结果")]),s("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[s("el-tab-pane",{attrs:{label:"单曲",name:"1"}}),s("el-tab-pane",{attrs:{label:"歌单",name:"1000"}})],1),"1"===t.type?s("song-list",{attrs:{"song-list":t.resultList,loading:t.loading}}):"1000"===t.type?s("play-list",{attrs:{lists:t.resultList}}):t._e()],1)},a=[],n=s("5530"),l=(s("d3b7"),s("841c"),s("ac1f"),s("d81d"),s("a15b"),s("2f62")),c=s("6fcc"),o=s("ca00"),r=s("cdcd"),u={name:"search",components:{PlayList:r["a"],SongList:c["a"]},data:function(){return{wd:"",type:"1",loading:!1,resultList:[]}},watch:{$route:function(){this.wd=this.$route.query.wd,this.getSearch()}},methods:Object(n["a"])(Object(n["a"])({},Object(l["b"])(["search","getSongDetails"])),{},{getSearch:function(){var t=this;this.resultList=[];var e={keywords:this.wd,type:this.type};this.loading=!0,this.search(e).then((function(e){t.handleRes(e)})).catch((function(){t.$message.error("搜索失败")})).finally((function(){t.loading=!1}))},handleTabClick:function(){this.getSearch()},handleRes:function(t){var e=this;if("1"===this.type){var s=[];t.result.songs.map((function(t){s.push(t.id)}));var i=s.join(",");this.getSongDetails(i).then((function(t){var s=[];t.songs.map((function(t){s.push(Object(o["a"])(t))})),e.resultList=s}))}else"1000"===this.type&&(this.resultList=t.result.playlists)}}),mounted:function(){this.wd=this.$route.query.wd,this.getSearch()}},d=u,h=(s("bd53"),s("2877")),f=Object(h["a"])(d,i,a,!1,null,"ea832c76",null);e["default"]=f.exports},3830:function(t,e,s){"use strict";s("16f2")},"51dd":function(t,e,s){},"6fcc":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"song-list",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},t._l(t.songList,(function(e,i){return s("div",{key:i,staticClass:"song-item",on:{mouseenter:function(e){return t.handleEnter(i)},mouseleave:t.handleLeave}},[s("div",{staticClass:"item-index"},[t._v(t._s(i+1))]),s("div",{staticClass:"item-cover"},[s("el-image",{staticClass:"item-image",attrs:{src:e.image,lazy:""}}),t.showBtn===i?s("div",{staticClass:"item-btn"},[s("i",{staticClass:"el-icon-video-play btn-icon",on:{click:function(e){return t.handlePlay(i)}}})]):t._e()],1),s("div",{staticClass:"item-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"item-singer"},[t._v(t._s(e.singer))]),s("div",{staticClass:"item-album"},[t._v(t._s(e.album))]),s("div",{staticClass:"item-duration"},[t._v(t._s(t.toGetMS(e.duration)))])])})),0)},a=[],n=s("5530"),l=s("ca00"),c=s("2f62"),o={name:"SongList",props:{songList:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}},data:function(){return{showBtn:-1}},methods:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["selectPlay"])),{},{handlePlay:function(t){this.selectPlay({list:this.songList,index:t})},handleEnter:function(t){this.showBtn=t},handleLeave:function(){this.showBtn=-1},toGetMS:function(t){return Object(l["b"])(t)}})},r=o,u=(s("3830"),s("2877")),d=Object(u["a"])(r,i,a,!1,null,"64105db6",null);e["a"]=d.exports},"93c4":function(t,e,s){},bd53:function(t,e,s){"use strict";s("51dd")},cdcd:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"play-list"},t._l(t.lists,(function(e){return s("div",{key:e.id,staticClass:"list-item"},[s("div",{staticClass:"item-cover",on:{click:function(s){return t.handleListDetail(e)}}},[s("el-image",{staticClass:"item-image",attrs:{src:e.picUrl||e.coverImgUrl,lazy:""}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),s("span",{staticClass:"dot"},[t._v("...")])]),s("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"el-icon-picture-outline"})])]),s("div",{staticClass:"item-count"},[s("i",{staticClass:"el-icon-caret-right"}),s("span",[t._v(t._s(t.getPlayCount(e)))])])],1),s("div",{staticClass:"item-info"},[s("span",[t._v(t._s(e.name))])])])})),0)},a=[],n={name:"PlayList",props:{lists:{type:Array,default:function(){return[]}}},methods:{handleListDetail:function(t){this.$router.push({name:"playlist-detail",query:{id:t.id}})},getPlayCount:function(t){return t.playCount<1e4?t.playCount:Math.floor(t.playCount/1e4)+"万"}}},l=n,c=(s("0678"),s("2877")),o=Object(c["a"])(l,i,a,!1,null,"0d782014",null);e["a"]=o.exports},d81d:function(t,e,s){"use strict";var i=s("23e7"),a=s("b727").map,n=s("1dde"),l=n("map");i({target:"Array",proto:!0,forced:!l},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=search.5d91710a.js.map