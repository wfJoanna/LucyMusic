(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{"0315":function(t,e,n){},"18cf":function(t,e,n){},"22ef":function(t,e,n){"use strict";n("588f")},"37df":function(t,e,n){},"588f":function(t,e,n){},"6f22":function(t,e,n){"use strict";n("37df")},"77b8":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("banner"),n("personalized-list"),n("personalized-song")],1)},i=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"personalized-list"},[n("div",{staticClass:"list-title"},[n("span",{staticStyle:{cursor:"pointer"},on:{click:t.handleOpenList}},[t._v("推荐歌单"),n("i",{staticClass:"el-icon-arrow-right"})])]),n("play-list",{attrs:{lists:t.lists,loading:t.loading}})],1)},l=[],o=n("5530"),r=(n("d3b7"),n("2f62")),c=n("cdcd"),u={name:"PersonalizedList",components:{PlayList:c["a"]},data:function(){return{lists:[],loading:!1}},methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["getPersonalized"])),{},{getPersonalizedList:function(){var t=this;this.loading=!0,this.getPersonalized(24).then((function(e){t.lists=e.result})).catch((function(){return t.$message.error("获取推荐歌单出错")})).finally((function(){t.loading=!1}))},handleOpenList:function(){this.$router.push({name:"playlist"})}}),mounted:function(){this.getPersonalizedList()}},d=u,f=(n("22ef"),n("2877")),g=Object(f["a"])(d,a,l,!1,null,"26c6d8f6",null),p=g.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"personalized-song"},[n("div",{staticClass:"song-title"},[n("span",{staticStyle:{cursor:"pointer"},on:{click:t.handleOpenSong}},[t._v("最新音乐"),n("i",{staticClass:"el-icon-arrow-right"})])]),n("div",{staticClass:"song-content"},t._l(t.songList,(function(e,s){return n("div",{key:e.id,staticClass:"song-item",on:{mouseenter:function(e){return t.handleEnter(s)},mouseleave:t.handleLeave}},[n("div",{staticClass:"song-index"},[t.focusItem===s&&!t.playing||t.focusItem===s&&t.currentSong.id!==e.id?n("i",{staticClass:"el-icon-video-play play-icon",on:{click:function(e){return t.handlePlay(s)}}}):t.focusItem===s&&t.playing?n("i",{staticClass:"el-icon-video-pause play-icon",on:{click:t.handlePause}}):n("span",[t._v(t._s(s+1))])]),n("div",{staticClass:"song-cover"},[n("el-image",{key:e.image,attrs:{src:e.image,lazy:""}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),n("span",{staticClass:"dot"},[t._v("...")])]),n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-picture-outline"})])])],1),n("div",{staticClass:"song-info"},[n("div",{staticClass:"song-name"},[t._v(t._s(e.name))]),n("div",{staticClass:"song-singer"},[t._v(t._s(e.singer))])])])})),0)])},h=[],v=(n("d81d"),n("a15b"),n("ca00")),y={name:"PersonalizedSong",data:function(){return{songList:[],focusItem:-1}},computed:Object(o["a"])(Object(o["a"])({},Object(r["e"])(["playing","userInfo"])),Object(r["c"])(["currentSong"])),methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["selectPlay","pausePlay","getNewSongs","getSongDetails"])),{},{handleOpenSong:function(){this.$router.push({name:"song"})},getPersonalizedSong:function(){var t=this;this.getNewSongs(12).then((function(e){var n=[];e.result.map((function(t){n.push(t.id)}));var s=n.join(",");t.getSongDetails(s).then((function(e){var n=[];e.songs.map((function(t){n.push(Object(v["a"])(t))})),t.songList=n}))})).catch((function(e){t.$message.error("获取最新音乐出错")}))},handleEnter:function(t){this.focusItem=t},handleLeave:function(){this.focusItem=-1},handlePlay:function(t){this.selectPlay({list:this.songList,index:t})},handlePause:function(){this.pausePlay()}}),mounted:function(){this.getPersonalizedSong()}},b=y,C=(n("6f22"),Object(f["a"])(b,m,h,!1,null,"719b7155",null)),_=C.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"banner"},[t.bannersInit?n("el-carousel",{attrs:{interval:4e3,type:"card"}},t._l(t.banners,(function(t){return n("el-carousel-item",{key:t.imageUrl},[n("img",{attrs:{src:t.imageUrl,alt:t.typeTitle}})])})),1):t._e()],1)},P=[],j={name:"Banner",data:function(){return{banners:[]}},computed:{bannersInit:function(){return this.banners.length}},methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["getBanners"])),{},{getBanner:function(){var t=this;this.getBanners().then((function(e){t.banners=e.banners})).catch((function(){return t.$message.error("获取轮播图出错")}))}}),mounted:function(){this.getBanner()}},z=j,L=(n("78d9"),Object(f["a"])(z,O,P,!1,null,"0b827f1c",null)),S=L.exports,$={name:"home",components:{Banner:S,PersonalizedSong:_,PersonalizedList:p}},k=$,w=Object(f["a"])(k,s,i,!1,null,"636387d5",null);e["default"]=w.exports},"78d9":function(t,e,n){"use strict";n("0315")},cdcd:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"play-list",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},t._l(t.lists,(function(e){return n("div",{key:e.id,staticClass:"list-item"},[n("div",{staticClass:"item-cover",on:{click:function(n){return t.handleListDetail(e)}}},[n("el-image",{staticClass:"item-image",attrs:{src:e.picUrl||e.coverImgUrl,lazy:""}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),n("span",{staticClass:"dot"},[t._v("...")])]),n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-picture-outline"})])]),e.playCount?n("div",{staticClass:"item-count"},[n("i",{staticClass:"el-icon-caret-right"}),n("span",[t._v(t._s(t.getPlayCount(e)))])]):t._e()],1),n("div",{staticClass:"item-info"},[n("span",[t._v(t._s(e.name))])])])})),0)},i=[],a={name:"PlayList",props:{lists:{type:Array,default:function(){return[]}},type:{type:String,default:"playlist"},loading:{type:Boolean,default:!1}},methods:{handleListDetail:function(t){"album"===this.type?this.$router.push({name:"album-detail",query:{id:t.id}}):this.$router.push({name:"playlist-detail",query:{id:t.id}})},getPlayCount:function(t){return t.playCount<1e4?t.playCount:Math.floor(t.playCount/1e4)+"万"}}},l=a,o=(n("f146"),n("2877")),r=Object(o["a"])(l,s,i,!1,null,"670b869a",null);e["a"]=r.exports},d81d:function(t,e,n){"use strict";var s=n("23e7"),i=n("b727").map,a=n("1dde"),l=a("map");s({target:"Array",proto:!0,forced:!l},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},f146:function(t,e,n){"use strict";n("18cf")}}]);
//# sourceMappingURL=home.17bf6a04.js.map