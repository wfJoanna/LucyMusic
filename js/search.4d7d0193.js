(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{"18cf":function(t,e,a){},"1ef7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("div",{staticClass:"search-title"},[t._v("搜索结果 共"+t._s(t.totalCount)+"条"),t.totalCount>288?a("span",[t._v("（最多显示12页）")]):t._e()]),a("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-tab-pane",{attrs:{label:"单曲",name:"1"}}),a("el-tab-pane",{attrs:{label:"歌单",name:"1000"}}),a("el-tab-pane",{attrs:{label:"歌手",name:"100"}}),a("el-tab-pane",{attrs:{label:"专辑",name:"10"}})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"loading",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},["1"===t.type?a("song-list",{attrs:{"song-list":t.resultList}}):"1000"===t.type?a("play-list",{attrs:{lists:t.resultList}}):"10"===t.type?a("play-list",{attrs:{type:"album",lists:t.resultList}}):"100"===t.type?a("div",{staticClass:"singer"},t._l(t.resultList,(function(e){return a("div",{key:e.id,staticClass:"singer-item",on:{click:function(a){return t.handleSingerDetail(e)}}},[a("el-image",{staticClass:"item-avatar",attrs:{src:e.picUrl||"https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png",fit:"cover",lazy:""}}),a("span",{staticClass:"item-name"},[t._v(t._s(e.name))]),e.transNames?a("span",{staticClass:"item-trans"},[t._v("("+t._s(e.transNames[0])+")")]):e.alias&&e.alias.length>0?a("span",{staticClass:"item-trans"},[t._v("("+t._s(e.alias[0])+")")]):t._e()],1)})),0):t._e()],1),a("div",{staticClass:"bottom"},[a("el-pagination",{attrs:{background:"",layout:"prev,pager,next,jumper","page-size":24,total:t.totalCount>288?288:t.totalCount,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1)},i=[],n=a("5530"),l=(a("d3b7"),a("841c"),a("ac1f"),a("d81d"),a("a15b"),a("2f62")),r=a("6fcc"),o=a("ca00"),c=a("cdcd"),u={name:"search",components:{PlayList:c["a"],SongList:r["a"]},data:function(){return{wd:"",type:"1",loading:!1,resultList:[],currentPage:1,totalCount:0}},watch:{$route:function(){this.wd=this.$route.query.wd,this.currentPage=1,this.getSearch()}},methods:Object(n["a"])(Object(n["a"])({},Object(l["b"])(["search","getSongDetails"])),{},{getSearch:function(){var t=this;this.resultList=[];var e={keywords:this.wd,type:this.type,limit:24,offset:24*(this.currentPage-1)};this.loading=!0,this.search(e).then((function(e){t.handleRes(e)})).catch((function(){t.$message.error("搜索失败")})).finally((function(){t.loading=!1}))},handleTabClick:function(){this.currentPage=1,this.getSearch()},handleRes:function(t){var e=this;if("1"===this.type){if(this.totalCount=t.result.songCount,0!==this.totalCount){var a=[];t.result.songs.map((function(t){a.push(t.id)}));var s=a.join(",");this.getSongDetails(s).then((function(t){var a=[];t.songs.map((function(t){a.push(Object(o["a"])(t))})),e.resultList=a}))}}else"1000"===this.type?(this.totalCount=t.result.playlistCount,0!==this.totalCount&&(this.resultList=t.result.playlists)):"100"===this.type?(this.totalCount=t.result.artistCount,0!==this.totalCount&&(this.resultList=t.result.artists)):"10"===this.type&&(this.totalCount=t.result.albumCount,0!==this.totalCount&&(this.resultList=t.result.albums))},handleSingerDetail:function(t){this.$router.push({name:"singer-detail",query:{id:t.id}})},handleCurrentChange:function(){this.getSearch()}}),mounted:function(){this.wd=this.$route.query.wd,this.getSearch()}},d=u,h=(a("9092"),a("2877")),p=Object(h["a"])(d,s,i,!1,null,"e3eab316",null);e["default"]=p.exports},4978:function(t,e,a){"use strict";a("9171")},"4cac":function(t,e,a){},"6fcc":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"song-list",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},t._l(t.songList,(function(e,s){return a("div",{key:s,staticClass:"song-item",on:{mouseenter:function(e){return t.handleEnter(s)},mouseleave:t.handleLeave}},[a("div",{staticClass:"item-index"},[t._v(t._s(s+1))]),a("div",{staticClass:"item-cover"},[a("el-image",{staticClass:"item-image",attrs:{src:e.image,lazy:""}}),t.showBtn===s?a("div",{staticClass:"item-btn"},[a("i",{staticClass:"el-icon-video-play btn-icon",on:{click:function(e){return t.handlePlay(s)}}})]):t._e()],1),a("div",{staticClass:"item-name"},[t._v(t._s(e.name))]),a("div",{staticClass:"item-singer"},[t._v(t._s(e.singer))]),a("div",{staticClass:"item-album",on:{click:function(a){return t.handleAlbumDetail(e)}}},[t._v(t._s(e.album))]),a("div",{staticClass:"item-duration"},[t._v(t._s(t.toGetMS(e.duration)))])])})),0)},i=[],n=a("5530"),l=a("ca00"),r=a("2f62"),o={name:"SongList",props:{songList:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}},data:function(){return{showBtn:-1}},methods:Object(n["a"])(Object(n["a"])({},Object(r["b"])(["selectPlay"])),{},{handlePlay:function(t){this.selectPlay({list:this.songList,index:t})},handleEnter:function(t){this.showBtn=t},handleLeave:function(){this.showBtn=-1},toGetMS:function(t){return Object(l["c"])(t)},handleAlbumDetail:function(t){this.$router.push({name:"album-detail",query:{id:t.albumId}})}})},c=o,u=(a("4978"),a("2877")),d=Object(u["a"])(c,s,i,!1,null,"479b67ec",null);e["a"]=d.exports},9092:function(t,e,a){"use strict";a("4cac")},9171:function(t,e,a){},cdcd:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"play-list",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},t._l(t.lists,(function(e){return a("div",{key:e.id,staticClass:"list-item"},[a("div",{staticClass:"item-cover",on:{click:function(a){return t.handleListDetail(e)}}},[a("el-image",{staticClass:"item-image",attrs:{src:e.picUrl||e.coverImgUrl,lazy:""}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])]),a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])]),e.playCount?a("div",{staticClass:"item-count"},[a("i",{staticClass:"el-icon-caret-right"}),a("span",[t._v(t._s(t.getPlayCount(e)))])]):t._e()],1),a("div",{staticClass:"item-info"},[a("span",[t._v(t._s(e.name))])])])})),0)},i=[],n={name:"PlayList",props:{lists:{type:Array,default:function(){return[]}},type:{type:String,default:"playlist"},loading:{type:Boolean,default:!1}},methods:{handleListDetail:function(t){"album"===this.type?this.$router.push({name:"album-detail",query:{id:t.id}}):this.$router.push({name:"playlist-detail",query:{id:t.id}})},getPlayCount:function(t){return t.playCount<1e4?t.playCount:Math.floor(t.playCount/1e4)+"万"}}},l=n,r=(a("f146"),a("2877")),o=Object(r["a"])(l,s,i,!1,null,"670b869a",null);e["a"]=o.exports},d81d:function(t,e,a){"use strict";var s=a("23e7"),i=a("b727").map,n=a("1dde"),l=n("map");s({target:"Array",proto:!0,forced:!l},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},f146:function(t,e,a){"use strict";a("18cf")}}]);
//# sourceMappingURL=search.4d7d0193.js.map