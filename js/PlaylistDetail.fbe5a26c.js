(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PlaylistDetail"],{"6fcc":function(t,i,a){"use strict";var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"song-list",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},t._l(t.songList,(function(i,e){return a("div",{key:e,staticClass:"song-item",on:{mouseenter:function(i){return t.handleEnter(e)},mouseleave:t.handleLeave}},[a("div",{staticClass:"item-index"},[t._v(t._s(e+1))]),a("div",{staticClass:"item-cover"},[a("el-image",{staticClass:"item-image",attrs:{src:i.image,lazy:""}}),t.showBtn===e?a("div",{staticClass:"item-btn"},[a("i",{staticClass:"el-icon-video-play btn-icon",on:{click:function(i){return t.handlePlay(e)}}})]):t._e()],1),a("div",{staticClass:"item-name"},[t._v(t._s(i.name))]),a("div",{staticClass:"item-singer"},[t._v(t._s(i.singer))]),a("div",{staticClass:"item-album",on:{click:function(a){return t.handleAlbumDetail(i)}}},[t._v(t._s(i.album))]),a("div",{staticClass:"item-duration"},[t._v(t._s(t.toGetMS(i.duration)))])])})),0)},s=[],n=a("5530"),l=a("ca00"),c=a("2f62"),r={name:"SongList",props:{songList:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}},data:function(){return{showBtn:-1}},methods:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["selectPlay"])),{},{handlePlay:function(t){this.selectPlay({list:this.songList,index:t})},handleEnter:function(t){this.showBtn=t},handleLeave:function(){this.showBtn=-1},toGetMS:function(t){return Object(l["b"])(t)},handleAlbumDetail:function(t){this.$router.push({name:"album-detail",query:{id:t.albumId}})}})},o=r,d=(a("cc47"),a("2877")),u=Object(d["a"])(o,e,s,!1,null,"7ac9cb47",null);i["a"]=u.exports},7277:function(t,i,a){"use strict";a("a9f3")},"9be8":function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"playlist-detail"},[a("div",{staticClass:"detail-top"},[a("div",{staticClass:"top-cover"},[a("el-image",{staticClass:"cover-image",attrs:{src:t.coverUrl,fit:"cover",lazy:""}})],1),a("div",{staticClass:"top-info"},[a("div",{staticClass:"first-line"},[t._v(t._s(t.title))]),a("div",{staticClass:"second-line"},[a("el-avatar",{staticClass:"avatar",attrs:{src:t.avatar},nativeOn:{click:function(i){return t.handleUser(i)}}}),a("span",{staticClass:"user-name",on:{click:t.handleUser}},[t._v(t._s(t.creator))]),a("span",{staticClass:"text"},[t._v(t._s(t.time)+"创建")])],1),a("div",{staticClass:"third-line"},[a("div",[t._v("标签：")]),t._l(t.tags,(function(i){return a("div",{staticClass:"tag",on:{click:function(a){return t.handleTag(i)}}},[t._v(t._s(i))])}))],2),a("div",{staticClass:"description"},[a("div",{staticClass:"short-desc"},[t._v(t._s(t.description))]),a("el-button",{attrs:{type:"text"},on:{click:function(i){t.dialogVisible=!0}}},[t._v("全部"),a("i",{staticClass:"el-icon-arrow-right"})]),a("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible},on:{"update:visible":function(i){t.dialogVisible=i}}},[t._v(t._s(t.description))])],1)])]),a("div",{staticClass:"detail-bottom"},[a("song-list",{attrs:{"song-list":t.playlist,loading:t.loading}})],1)])},s=[],n=a("5530"),l=(a("d3b7"),a("b0c0"),a("a4d3"),a("e01a"),a("d81d"),a("a15b"),a("2f62")),c=a("ca00"),r=a("6fcc"),o={name:"PlaylistDetail",components:{SongList:r["a"]},data:function(){return{listId:"",playlist:[],loading:!1,dialogVisible:!1,coverUrl:"",title:"",creator:"",avatar:"",time:"",tags:[],description:"",creatorId:""}},methods:Object(n["a"])(Object(n["a"])({},Object(l["b"])(["getListDetail","getSongDetails"])),{},{getListDetails:function(){var t=this;this.loading=!0,this.getListDetail(this.listId).then((function(i){var a=i.playlist;t.coverUrl=a.coverImgUrl,t.title=a.name,t.creator=a.creator.nickname,t.avatar=a.creator.avatarUrl,t.time=Object(c["d"])(a.createTime),t.tags=a.tags,t.description=a.description,t.creatorId=a.creator.userId;var e=[];a.trackIds.map((function(t){e.push(t.id)}));var s=e.join(",");t.getSongDetails(s).then((function(i){var a=[];i.songs.map((function(t){a.push(Object(c["a"])(t))})),t.playlist=a}))})).catch((function(){t.$message.error("获取歌单详情失败")})).finally((function(){t.loading=!1}))},handleTag:function(t){this.$router.push({name:"playlist",query:{tag:t}})},handleUser:function(){this.$router.push({name:"user-detail",query:{id:this.creatorId}})}}),mounted:function(){this.listId=this.$route.query.id,this.getListDetails()}},d=o,u=(a("7277"),a("2877")),v=Object(u["a"])(d,e,s,!1,null,"1a758fcc",null);i["default"]=v.exports},a9f3:function(t,i,a){},be6e:function(t,i,a){},cc47:function(t,i,a){"use strict";a("be6e")},d81d:function(t,i,a){"use strict";var e=a("23e7"),s=a("b727").map,n=a("1dde"),l=n("map");e({target:"Array",proto:!0,forced:!l},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=PlaylistDetail.fbe5a26c.js.map