(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SongDetail"],{1276:function(t,i,s){"use strict";var e=s("d784"),n=s("44e7"),a=s("825a"),c=s("1d80"),r=s("4840"),l=s("8aa5"),o=s("50c4"),u=s("14c3"),m=s("9263"),h=s("d039"),d=[].push,g=Math.min,v=4294967295,f=!h((function(){return!RegExp(v,"y")}));e("split",2,(function(t,i,s){var e;return e="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,s){var e=String(c(this)),a=void 0===s?v:s>>>0;if(0===a)return[];if(void 0===t)return[e];if(!n(t))return i.call(e,t,a);var r,l,o,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,f=new RegExp(t.source,h+"g");while(r=m.call(f,e)){if(l=f.lastIndex,l>g&&(u.push(e.slice(g,r.index)),r.length>1&&r.index<e.length&&d.apply(u,r.slice(1)),o=r[0].length,g=l,u.length>=a))break;f.lastIndex===r.index&&f.lastIndex++}return g===e.length?!o&&f.test("")||u.push(""):u.push(e.slice(g)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(t,s){return void 0===t&&0===s?[]:i.call(this,t,s)}:i,[function(i,s){var n=c(this),a=void 0==i?void 0:i[t];return void 0!==a?a.call(i,n,s):e.call(String(n),i,s)},function(t,n){var c=s(e,t,this,n,e!==i);if(c.done)return c.value;var m=a(t),h=String(this),d=r(m,RegExp),p=m.unicode,y=(m.ignoreCase?"i":"")+(m.multiline?"m":"")+(m.unicode?"u":"")+(f?"y":"g"),C=new d(f?m:"^(?:"+m.source+")",y),b=void 0===n?v:n>>>0;if(0===b)return[];if(0===h.length)return null===u(C,h)?[h]:[];var S=0,_=0,O=[];while(_<h.length){C.lastIndex=f?_:0;var j,w=u(C,f?h:h.slice(_));if(null===w||(j=g(o(C.lastIndex+(f?0:_)),h.length))===S)_=l(h,_,p);else{if(O.push(h.slice(S,_)),O.length===b)return O;for(var x=1;x<=w.length-1;x++)if(O.push(w[x]),O.length===b)return O;_=S=j}}return O.push(h.slice(S)),O}]}),!f)},6705:function(t,i,s){"use strict";s("7a30")},7049:function(t,i,s){},"7a30":function(t,i,s){},"7e75":function(t,i,s){"use strict";s("7049")},b6f2:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"song-detail"},[s("div",{staticClass:"detail-top"},[s("div",{ref:"turnImage",staticClass:"detail-cover turn-stop"},[s("el-image",{staticClass:"cover-image",attrs:{src:this.currentSong.image,lazy:"","preview-src-list":[this.currentSong.image]}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"})])],1),s("div",{staticClass:"detail-text"},[s("div",{staticClass:"detail-info"},[s("div",{staticClass:"info-big"},[t._v(t._s(this.currentSong.name))]),s("div",{staticClass:"info-small"},[t._v("歌手："+t._s(this.currentSong.singer))]),s("div",{staticClass:"info-small"},[t._v("专辑："+t._s(this.currentSong.album))])]),t.lyrics?s("div",{staticClass:"detail-lyric"},[s("div",{staticClass:"lyric-move",style:t.lyricTop},t._l(t.lyricObject,(function(i,e){return s("div",{key:e,staticClass:"lyric-basic",class:{"lyric-active":t.lyricActive(e)}},[t._v(t._s(i))])})),0),s("div",{staticClass:"lyric-cover"})]):s("div",{staticClass:"no-lyric"},[t._v("~~ 没有歌词哦 ~~")])])]),s("div",{staticClass:"detail-bottom"},[s("comments",{attrs:{comments:t.comments}}),s("div",{staticClass:"detail-simi"},[s("div",{staticClass:"simi-title"},[t._v("相似歌曲")]),t._l(t.simiSongs,(function(i,e){return s("div",{key:e,staticClass:"simi-item",on:{mouseenter:function(i){return t.handleSimiEnter(e)},mouseleave:t.handleSimiLeave}},[s("div",{staticClass:"item-cover"},[s("el-image",{staticClass:"item-image",attrs:{src:i.album.picUrl,lazy:""}}),t.showBtn===e?s("div",{staticClass:"item-btn"},[s("i",{staticClass:"el-icon-video-play btn-icon",on:{click:function(i){return t.handlePlaySimi(e)}}})]):t._e()],1),s("div",{staticClass:"item-info"},[s("div",{staticClass:"info-name"},[t._v(t._s(i.name))]),s("div",[t._v(t._s(t.getSimiSinger(i.artists)))])])])}))],2)],1)])},n=[],a=s("5530"),c=(s("1276"),s("ac1f"),s("d81d"),s("a15b"),s("ca00")),r=s("2f62"),l=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"comments"},[s("div",{staticClass:"comment-hot"},[s("div",{staticClass:"hot-title"},[t._v("精彩评论")]),t._l(t.comments,(function(i,e){return s("div",{key:e,staticClass:"hot-item"},[s("el-image",{staticClass:"hot-avatar",attrs:{src:i.user.avatarUrl,lazy:""}}),s("div",{staticClass:"hot-left"},[s("div",{staticClass:"left-comment"},[t._v(t._s(i.user.nickname)+"："+t._s(i.content))]),s("div",{staticClass:"left-bottom"},[s("span",[t._v(t._s(t.toGetYMD(i.time)))]),s("span",[s("i",{staticClass:"el-icon-thumb"}),t._v(t._s(i.likedCount))])])])],1)}))],2),s("div",{staticClass:"comment-new"})])},o=[],u={name:"Comments",props:{comments:{type:Array,default:function(){return[]}}},methods:{toGetYMD:function(t){return Object(c["d"])(t)}}},m=u,h=(s("6705"),s("2877")),d=Object(h["a"])(m,l,o,!1,null,"aea4e8be",null),g=d.exports,v={name:"SongDetail",components:{Comments:g},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(r["c"])(["currentSong"])),Object(r["e"])(["playing","currentTime"])),{},{songId:function(){return this.currentSong.id},lyricActive:function(){return function(t){return this.currentTime>=t}},lyricTop:function(){var t=37,i=0;for(var s in this.lyricObject)this.currentTime>=s&&i++;return i>5?{top:-t*(i-5)+"px"}:{top:"0px"}}}),watch:{songId:function(){this.initialize()},playing:function(){this.turnOrStop()}},data:function(){return{lyrics:"",lyricObject:{},comments:[],simiSongs:[],showBtn:-1}},methods:Object(a["a"])(Object(a["a"])({},Object(r["b"])(["getLyric","getSongDetails","getSimiSong","selectPlay","getCommentHot"])),{},{initialize:function(){this.getHotComments(),this.getSongLyrics(),this.getSimiSongs(),this.turnOrStop()},getSongLyrics:function(){var t=this;this.getLyric(this.songId).then((function(i){i.lrc&&(t.lyrics=i.lrc.lyric,t.splitLyrics())})).catch((function(){t.$message.error("获取歌词失败")}))},getSimiSongs:function(){var t=this;this.getSimiSong(this.songId).then((function(i){t.simiSongs=i.songs})).catch((function(){t.$message.error("获取相似音乐失败")}))},turnOrStop:function(){!0===this.playing?this.$refs.turnImage.classList.remove("turn-stop"):this.$refs.turnImage.classList.add("turn-stop")},splitLyrics:function(){for(var t=this.lyrics.split(/\[|\]/g),i={},s=1;s<t.length;s+=2){var e=t[s].substr(0,2),n=t[s].substr(3,2),a=60*e+1*n;i.hasOwnProperty(a)?i[a]=i[a]+t[s+1]:i[a]=t[s+1]}this.lyricObject=Object.assign({},i)},getSimiSinger:function(t){return Object(c["c"])(t)},handleSimiEnter:function(t){this.showBtn=t},handleSimiLeave:function(){this.showBtn=-1},handlePlaySimi:function(t){var i=this,s=[];this.simiSongs.map((function(t){s.push(t.id)}));var e=s.join(",");this.getSongDetails(e).then((function(s){var e=[];s.songs.map((function(t){e.push(Object(c["a"])(t))})),i.selectPlay({list:e,index:t})})).catch((function(){i.$message.error("切换失败")}))},getHotComments:function(){var t=this,i={id:this.songId,type:0,limit:10};this.getCommentHot(i).then((function(i){t.comments=i.hotComments})).catch((function(){t.$message.error("获取热门评论失败")}))}}),mounted:function(){this.initialize(this.songId)}},f=v,p=(s("7e75"),Object(h["a"])(f,e,n,!1,null,"04eca923",null));i["default"]=p.exports},d81d:function(t,i,s){"use strict";var e=s("23e7"),n=s("b727").map,a=s("1dde"),c=a("map");e({target:"Array",proto:!0,forced:!c},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=SongDetail.65846d3c.js.map