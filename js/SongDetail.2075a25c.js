(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SongDetail"],{1276:function(t,i,n){"use strict";var s=n("d784"),e=n("44e7"),a=n("825a"),r=n("1d80"),c=n("4840"),l=n("8aa5"),o=n("50c4"),u=n("14c3"),g=n("9263"),h=n("d039"),d=[].push,v=Math.min,f=4294967295,m=!h((function(){return!RegExp(f,"y")}));s("split",2,(function(t,i,n){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var s=String(r(this)),a=void 0===n?f:n>>>0;if(0===a)return[];if(void 0===t)return[s];if(!e(t))return i.call(s,t,a);var c,l,o,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,m=new RegExp(t.source,h+"g");while(c=g.call(m,s)){if(l=m.lastIndex,l>v&&(u.push(s.slice(v,c.index)),c.length>1&&c.index<s.length&&d.apply(u,c.slice(1)),o=c[0].length,v=l,u.length>=a))break;m.lastIndex===c.index&&m.lastIndex++}return v===s.length?!o&&m.test("")||u.push(""):u.push(s.slice(v)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:i.call(this,t,n)}:i,[function(i,n){var e=r(this),a=void 0==i?void 0:i[t];return void 0!==a?a.call(i,e,n):s.call(String(e),i,n)},function(t,e){var r=n(s,t,this,e,s!==i);if(r.done)return r.value;var g=a(t),h=String(this),d=c(g,RegExp),p=g.unicode,y=(g.ignoreCase?"i":"")+(g.multiline?"m":"")+(g.unicode?"u":"")+(m?"y":"g"),S=new d(m?g:"^(?:"+g.source+")",y),b=void 0===e?f:e>>>0;if(0===b)return[];if(0===h.length)return null===u(S,h)?[h]:[];var C=0,O=0,_=[];while(O<h.length){S.lastIndex=m?O:0;var j,w=u(S,m?h:h.slice(O));if(null===w||(j=v(o(S.lastIndex+(m?0:O)),h.length))===C)O=l(h,O,p);else{if(_.push(h.slice(C,O)),_.length===b)return _;for(var x=1;x<=w.length-1;x++)if(_.push(w[x]),_.length===b)return _;O=C=j}}return _.push(h.slice(C)),_}]}),!m)},3790:function(t,i,n){"use strict";n("897a")},"897a":function(t,i,n){},b6f2:function(t,i,n){"use strict";n.r(i);var s=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"song-detail"},[n("div",{staticClass:"detail-top"},[n("div",{ref:"turnImage",staticClass:"detail-cover turn-stop"},[n("el-image",{staticClass:"cover-image",attrs:{src:this.currentSong.image,lazy:"","preview-src-list":[this.currentSong.image]}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"})])],1),n("div",{staticClass:"detail-text"},[n("div",{staticClass:"detail-info"},[n("div",{staticClass:"info-big"},[t._v(t._s(this.currentSong.name))]),n("div",{staticClass:"info-small"},[t._v("歌手："+t._s(this.currentSong.singer))]),n("div",{staticClass:"info-small"},[t._v("专辑："+t._s(this.currentSong.album))])]),n("div",{staticClass:"detail-lyric"},[n("div",{staticClass:"lyric-move",style:t.lyricTop},t._l(t.lyricObject,(function(i,s){return n("div",{key:s,staticClass:"lyric-basic",class:{"lyric-active":t.lyricActive(s)}},[t._v(t._s(i))])})),0),n("div",{staticClass:"lyric-cover"})])])]),n("div",{staticClass:"detail-bottom"},[n("div",{staticClass:"detail-comment"}),n("div",{staticClass:"detail-simi"},[n("div",{staticClass:"simi-title"},[t._v("相似歌曲")]),t._l(t.simiSongs,(function(i,s){return n("div",{key:s,staticClass:"simi-item",on:{mouseenter:function(i){return t.handleSimiEnter(s)},mouseleave:t.handleSimiLeave}},[n("div",{staticClass:"item-cover"},[n("el-image",{staticClass:"item-image",attrs:{src:i.album.picUrl,lazy:""}}),t.showBtn===s?n("div",{staticClass:"item-btn"},[n("el-icon",{staticClass:"el-icon-video-play btn-icon",nativeOn:{click:function(i){return t.handlePlaySimi(s)}}})],1):t._e()],1),n("div",{staticClass:"item-info"},[n("div",{staticClass:"info-name"},[t._v(t._s(i.name))]),n("div",[t._v(t._s(t.getSimiSinger(i.artists)))])])])}))],2)])])},e=[],a=n("5530"),r=(n("1276"),n("ac1f"),n("d81d"),n("a15b"),n("ca00")),c=n("2f62"),l={name:"SongDetail",computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(c["c"])(["currentSong"])),Object(c["e"])(["playing","currentTime"])),{},{songId:function(){return this.currentSong.id},lyricActive:function(){return function(t){return this.currentTime>=t}},lyricTop:function(){var t=37,i=0;for(var n in this.lyricObject)this.currentTime>=n&&i++;return i>5?{top:-t*(i-5)+"px"}:{top:"0px"}}}),watch:{songId:function(){this.initialize()},playing:function(){this.turnOrStop()}},data:function(){return{lyrics:"",lyricObject:{},simiSongs:[],showBtn:-1}},methods:Object(a["a"])(Object(a["a"])({},Object(c["b"])(["getLyric","getSongDetails","getSimiSong","selectPlay"])),{},{initialize:function(){this.getSongLyrics(),this.getSimiSongs(),this.turnOrStop()},getSongLyrics:function(){var t=this;this.getLyric(this.songId).then((function(i){t.lyrics=i.lrc.lyric,t.splitLyrics()})).catch((function(){t.$message.error("获取歌词失败")}))},getSimiSongs:function(){var t=this;this.getSimiSong(this.songId).then((function(i){t.simiSongs=i.songs})).catch((function(){t.$message.error("获取相似音乐失败")}))},turnOrStop:function(){!0===this.playing?this.$refs.turnImage.classList.remove("turn-stop"):this.$refs.turnImage.classList.add("turn-stop")},splitLyrics:function(){for(var t=this.lyrics.split(/\[|\]/g),i={},n=1;n<t.length;n+=2){var s=t[n].substr(0,2),e=t[n].substr(3,2),a=60*s+1*e;i.hasOwnProperty(a)?i[a]=i[a]+t[n+1]:i[a]=t[n+1]}this.lyricObject=Object.assign({},i)},getSimiSinger:function(t){return Object(r["c"])(t)},handleSimiEnter:function(t){this.showBtn=t},handleSimiLeave:function(){this.showBtn=-1},handlePlaySimi:function(t){var i=this,n=[];this.simiSongs.map((function(t){n.push(t.id)}));var s=n.join(",");this.getSongDetails(s).then((function(n){var s=[];n.songs.map((function(t){s.push(Object(r["a"])(t))})),i.selectPlay({list:s,index:t})})).catch((function(){i.$message.error("切换失败")}))}}),mounted:function(){this.initialize(this.songId)}},o=l,u=(n("3790"),n("2877")),g=Object(u["a"])(o,s,e,!1,null,"4706b2ae",null);i["default"]=g.exports},d81d:function(t,i,n){"use strict";var s=n("23e7"),e=n("b727").map,a=n("1dde"),r=a("map");s({target:"Array",proto:!0,forced:!r},{map:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=SongDetail.2075a25c.js.map