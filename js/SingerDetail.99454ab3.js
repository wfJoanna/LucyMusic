(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SingerDetail"],{"15e9":function(t,e,n){"use strict";n("d9aa")},2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("6b75");function a(t){if(Array.isArray(t))return Object(i["a"])(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var o=n("06c5");function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||s(t)||Object(o["a"])(t)||l()}},"5c27":function(t,e,n){"use strict";n("c349")},"6fcc":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"song-list",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},t._l(t.songList,(function(e,i){return n("div",{key:i,staticClass:"song-item",on:{mouseenter:function(e){return t.handleEnter(i)},mouseleave:t.handleLeave}},[n("div",{staticClass:"item-index"},[t._v(t._s(i+1))]),n("div",{staticClass:"item-cover"},[n("el-image",{staticClass:"item-image",attrs:{src:e.image,lazy:""}}),t.showBtn===i?n("div",{staticClass:"item-btn"},[n("i",{staticClass:"el-icon-video-play btn-icon",on:{click:function(e){return t.handlePlay(i)}}})]):t._e()],1),n("div",{staticClass:"item-name"},[t._v(t._s(e.name))]),n("div",{staticClass:"item-singer"},[t._v(t._s(e.singer))]),n("div",{staticClass:"item-album",on:{click:function(n){return t.handleAlbumDetail(e)}}},[t._v(t._s(e.album))]),n("div",{staticClass:"item-duration"},[t._v(t._s(t.toGetMS(e.duration)))])])})),0)},a=[],s=n("5530"),o=n("ca00"),l=n("2f62"),c={name:"SongList",props:{songList:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}},data:function(){return{showBtn:-1}},methods:Object(s["a"])(Object(s["a"])({},Object(l["b"])(["selectPlay"])),{},{handlePlay:function(t){this.selectPlay({list:this.songList,index:t})},handleEnter:function(t){this.showBtn=t},handleLeave:function(){this.showBtn=-1},toGetMS:function(t){return Object(o["c"])(t)},handleAlbumDetail:function(t){this.$router.push({name:"album-detail",query:{id:t.albumId}})}})},r=c,d=(n("cc47"),n("2877")),u=Object(d["a"])(r,i,a,!1,null,"7ac9cb47",null);e["a"]=u.exports},ab89:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"singer-detail"},[n("div",{staticClass:"top"},[n("el-image",{staticClass:"cover",attrs:{src:t.detail.cover||"https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png",fit:"cover"}}),n("div",{staticClass:"info"},[n("div",{staticClass:"first-line"},[t._v(t._s(t.detail.name))]),t.detail.transNames?n("div",{staticClass:"second-line"},[t._v(t._s(t.detail.transNames[0]))]):t.detail.alias&&t.detail.alias.length>0?n("div",{staticClass:"second-line"},[t._v(t._s(t.detail.alias[0]))]):t._e(),n("div",{staticClass:"third-line"},[n("span",{staticClass:"text"},[t._v("单曲数："+t._s(t.detail.musicSize))]),n("span",{staticClass:"text"},[t._v("专辑数："+t._s(t.detail.albumSize))])])])],1),n("el-tabs",{model:{value:t.activePane,callback:function(e){t.activePane=e},expression:"activePane"}},[n("el-tab-pane",{attrs:{label:"热门歌曲",name:"hot"}}),n("el-tab-pane",{attrs:{label:"专辑",name:"album"}}),n("el-tab-pane",{attrs:{label:"歌手详情",name:"desc"}})],1),"hot"===t.activePane?n("div",[n("song-list",{attrs:{"song-list":t.songList,loading:t.songLoading}})],1):"album"===t.activePane?n("div",[n("load-more",{on:{"scroll-state":t.getAlbum}},[n("play-list",{attrs:{lists:t.albums,type:"album"}})],1),t.loading?n("div",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}],staticClass:"loading",attrs:{"element-loading-text":"拼命加载中","element-loading-background":"rgba(0, 0, 0, 0)","element-loading-spinner":"el-icon-loading"}}):t._e(),t.noMore?n("div",{staticClass:"loaded"},[t._v(" - 已加载完 - ")]):t._e()],1):"desc"===t.activePane?n("div",{staticClass:"desc"},[t._v(" "+t._s(t.detail.briefDesc)+" ")]):t._e()],1)},a=[],s=n("2909"),o=n("5530"),l=(n("d3b7"),n("d81d"),n("a15b"),n("2f62")),c=n("6fcc"),r=n("ca00"),d=n("cdcd"),u=n("eafa"),m={name:"SingerDetail",components:{LoadMore:u["a"],PlayList:d["a"],SongList:c["a"]},data:function(){return{singerId:"",detail:{},activePane:"hot",songList:[],count:1,albums:[],loading:!1,noLoading:!1,noMore:!1,songLoading:!1}},methods:Object(o["a"])(Object(o["a"])({},Object(l["b"])(["getSingerHotSong","getSingerDetail","getSongDetails","getSingerAlbum"])),{},{getHotSongs:function(){var t=this;this.songLoading=!0,this.getSingerHotSong(this.singerId).then((function(e){var n=[];e.songs.map((function(t){n.push(t.id)}));var i=n.join(",");t.getSongDetails(i).then((function(e){var n=[];e.songs.map((function(t){n.push(Object(r["a"])(t))})),t.songList=n}))})).catch((function(){t.$message.error("获取歌手热门50首歌曲失败")})).finally((function(){t.songLoading=!1}))},getDetail:function(){var t=this;this.getSingerDetail(this.singerId).then((function(e){t.detail=e.data.artist})).catch((function(){t.$message.error("获取歌手详情失败")}))},getAlbum:function(){var t=this;if(!this.noMore&&!this.noLoading){this.loading=!0,this.noLoading=!0;var e={id:this.singerId,limit:40,offset:40*(this.count-1)};this.getSingerAlbum(e).then((function(e){var n;(n=t.albums).push.apply(n,Object(s["a"])(e.hotAlbums)),t.count+=1,!0!==e.more&&(t.noMore=!0)})).catch((function(){t.$message.error("获取歌手专辑失败")})).finally((function(){t.loading=!1,t.noLoading=!1}))}}}),mounted:function(){this.singerId=this.$route.query.id,this.getDetail(),this.getHotSongs(),this.getAlbum()}},g=m,f=(n("15e9"),n("2877")),h=Object(f["a"])(g,i,a,!1,null,"860f0fc8",null);e["default"]=h.exports},be6e:function(t,e,n){},c349:function(t,e,n){},cc47:function(t,e,n){"use strict";n("be6e")},cdcd:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"play-list"},t._l(t.lists,(function(e){return n("div",{key:e.id,staticClass:"list-item"},[n("div",{staticClass:"item-cover",on:{click:function(n){return t.handleListDetail(e)}}},[n("el-image",{staticClass:"item-image",attrs:{src:e.picUrl||e.coverImgUrl,lazy:""}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),n("span",{staticClass:"dot"},[t._v("...")])]),n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-picture-outline"})])]),e.playCount?n("div",{staticClass:"item-count"},[n("i",{staticClass:"el-icon-caret-right"}),n("span",[t._v(t._s(t.getPlayCount(e)))])]):t._e()],1),n("div",{staticClass:"item-info"},[n("span",[t._v(t._s(e.name))])])])})),0)},a=[],s={name:"PlayList",props:{lists:{type:Array,default:function(){return[]}},type:{type:String,default:"playlist"}},methods:{handleListDetail:function(t){"album"===this.type?this.$router.push({name:"album-detail",query:{id:t.id}}):this.$router.push({name:"playlist-detail",query:{id:t.id}})},getPlayCount:function(t){return t.playCount<1e4?t.playCount:Math.floor(t.playCount/1e4)+"万"}}},o=s,l=(n("5c27"),n("2877")),c=Object(l["a"])(o,i,a,!1,null,"77b82f41",null);e["a"]=c.exports},d81d:function(t,e,n){"use strict";var i=n("23e7"),a=n("b727").map,s=n("1dde"),o=s("map");i({target:"Array",proto:!0,forced:!o},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},d9aa:function(t,e,n){},eafa:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"load-more"},[t._t("default")],2)},a=[],s={name:"LoadMore",methods:{getScrollTop:function(){var t=0;return document.documentElement&&document.documentElement.scrollTop?t=document.documentElement.scrollTop:document.body&&(t=document.body.scrollTop),t},getClientHeight:function(){var t=0;return t=document.body.clientHeight&&document.documentElement.clientHeight?Math.min(document.body.clientHeight,document.documentElement.clientHeight):Math.max(document.body.clientHeight,document.documentElement.clientHeight),t},getScrollHeight:function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}},mounted:function(){var t=this;window.onscroll=function(){t.getScrollTop()+t.getClientHeight()>=t.getScrollHeight()&&t.$emit("scroll-state",!0)}}},o=s,l=n("2877"),c=Object(l["a"])(o,i,a,!1,null,"32646420",null);e["a"]=c.exports}}]);
//# sourceMappingURL=SingerDetail.99454ab3.js.map